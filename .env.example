# ============================================
# OPENCLAW PLATFORM — ENVIRONMENT VARIABLES
# ============================================
# Copy this file to .env and fill in your values.
# See SETUP_GUIDE.md for where to get each one.
# ============================================

# ── Database (PostgreSQL) ──
# The connection string to your PostgreSQL database.
# Format: postgresql://USERNAME:PASSWORD@HOST:PORT/DATABASE_NAME
DATABASE_URL=postgresql://openclaw:your-strong-password@localhost:5432/openclaw

# ── Redis ──
# Redis connection string for caching and rate limiting.
REDIS_URL=redis://localhost:6379

# ── Stripe (Payments) ──
# Get these from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_live_xxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxx

# Subscription Price IDs (create in Stripe Dashboard → Products)
STRIPE_PRICE_STARTER=price_xxxxxxxxxxxx
STRIPE_PRICE_PRO=price_xxxxxxxxxxxx
STRIPE_PRICE_BUSINESS=price_xxxxxxxxxxxx

# Token Package Price IDs (one-time products in Stripe)
STRIPE_PRICE_TOKENS_500K=price_xxxxxxxxxxxx
STRIPE_PRICE_TOKENS_1200K=price_xxxxxxxxxxxx
STRIPE_PRICE_TOKENS_3500K=price_xxxxxxxxxxxx
STRIPE_PRICE_TOKENS_8M=price_xxxxxxxxxxxx

# ── AI Providers ──
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-xxxxxxxxxxxx

# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxx

# ── Encryption ──
# Used to encrypt user's own API keys (OpenAI/Anthropic) stored in the database. Must be 64 hex chars (32 bytes).
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=

# ── AWS S3 (Optional — legacy, no longer required) ──
# User files now live in the OpenClaw container workspace (/root/.openclaw/workspace/).
# S3 is NOT used for provisioning or file storage. Only needed if you have
# a custom integration that relies on S3.
# AWS_ACCESS_KEY_ID=AKIA_xxxxxxxxxxxx
# AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxx
# AWS_REGION=us-east-1
# S3_BUCKET_PREFIX=openclaw-users

# ── Email (Resend) ──
# Get from: https://resend.com/api-keys
RESEND_API_KEY=re_xxxxxxxxxxxx
EMAIL_FROM=noreply@yourdomain.com

# ── Platform URLs ──
# Replace "yourdomain.com" with your actual domain.
PLATFORM_URL=https://yourdomain.com
API_URL=https://api.yourdomain.com
DOMAIN=yourdomain.com

# ── Google Sign-In ──
# Get from: https://console.cloud.google.com → APIs & Services → Credentials
# Create an "OAuth 2.0 Client ID" of type "Web application"
GOOGLE_CLIENT_ID=123456789-abcdef.apps.googleusercontent.com

# This goes in the dashboard .env.local too (with NEXT_PUBLIC_ prefix)
# NEXT_PUBLIC_GOOGLE_CLIENT_ID=123456789-abcdef.apps.googleusercontent.com

# ── Security Secrets ──
# Generate each with: openssl rand -hex 32
# NEVER commit real values. Use these only in .env on the server (and ensure .env is in .gitignore).
JWT_SECRET=generate-with-openssl-rand-hex-32
INTERNAL_SECRET=generate-with-openssl-rand-hex-32

# ── Hetzner Cloud (Auto-Provisioning Worker VPSes Only) ──
# Control plane (API, dashboard, DB) stays on your Hostinger VPS. Hetzner is used only to auto-create worker servers when capacity runs low.
# 1. Sign up:   https://console.hetzner.cloud
# 2. Create project (or use default)
# 3. Go to:     Security → API tokens → Generate API token (Read & Write)
HETZNER_API_TOKEN=

# Server type (default: cpx42 = 8 vCPU, 16GB RAM, €19.99/mo — fits ~7 starter users at 2GB each)
# Options: cpx22 (4GB, €6.49), cpx32 (8GB, €10.99), cpx42 (16GB, €19.99), cpx52 (24GB, €28.49)
# HETZNER_SERVER_TYPE=cpx42

# Location (default: nbg1 = Nuremberg, Germany — cheapest)
# Options: nbg1, fsn1, hel1 (EU, cheaper), ash, hil (US), sin (SG)
# HETZNER_LOCATION=nbg1

# Control plane IP. When set: (1) SSH from API to this host uses 127.0.0.1, and (2) this host is
# never used for user containers — only dedicated worker servers (e.g. Hetzner) are used.
# CONTROL_PLANE_IP=your-server-public-ip

# SSH from API server to workers — use one of:
#   SSH_PRIVATE_KEY = base64-encoded private key (base64 -w0 ~/.ssh/openclaw_worker)
#   SSH_PRIVATE_KEY_PATH = path to key file (e.g. /root/.ssh/openclaw_worker) — recommended on server
# SSH_PRIVATE_KEY=
# SSH_PRIVATE_KEY_PATH=/root/.ssh/openclaw_worker

# (Optional) SSH public key injected into new workers for API SSH access
# Contents of ~/.ssh/openclaw_worker.pub (starts with "ssh-ed25519 ...")
# WORKER_SSH_PUBLIC_KEY=

# ── Cloudflare DNS (Auto-creates per-user DNS records pointing to workers) ──
# This lets each user's subdomain resolve directly to the correct worker server.
# Required for multi-worker setups. Without it, DNS must be managed manually.
#
# 1. Go to: https://dash.cloudflare.com → your domain → Overview → right sidebar → "Zone ID"
# 2. Go to: https://dash.cloudflare.com/profile/api-tokens → Create Token
#    Use template "Edit zone DNS" → select your zone → Create Token
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ZONE_ID=

# ── Admin Panel Security ──
# Additional password required to access the admin panel (on top of JWT + is_admin flag).
# Generate with: openssl rand -hex 16
ADMIN_PASSWORD=generate-a-strong-password-here

# Comma-separated IP addresses allowed to access the admin panel.
# Leave empty to allow from any IP (still requires JWT + admin flag + password).
# ADMIN_ALLOWED_IPS=123.45.67.89,98.76.54.32

# ── Server Cost Tracking (for admin profit/loss dashboard) ──
# Monthly cost per worker server in EUR cents (e.g. 1999 = €19.99)
SERVER_COST_EUR_CENTS=1999

# ── Browserless (Optional — for web browsing feature) ──
# Get from: https://www.browserless.io
# Only needed for Pro/Business plans with browser access.
# BROWSERLESS_TOKEN=xxxxxxxxxxxx
